(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[779],{21932:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/create-item",function(){return t(41336)}])},37579:function(e,r,t){"use strict";var n=t(85893),a=t(45697),o=t.n(a),i=t(85200),s=t(96076);function l(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){u(e,r,t[r])}))}return e}function d(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(l){s=!0,a=l}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f={name:o().string.isRequired,label:o().string,type:o().string,placeholder:o().string,errorMessage:o().string,onHandleChange:o().func,maxLength:o().number},p=function(e){var r=e.name,t=e.type,a=e.onHandleChange,o=e.placeholder,s=e.errorMessage,l=e.label,u=e.maxLength,f=d((0,i.U$)(r),2),p=f[0],m=f[1],h=m.touched&&!!m.error;return(0,n.jsxs)("div",{className:"flex flex-col",children:[l&&(0,n.jsx)("label",{className:"font-medium pb-2",htmlFor:r,children:l}),(0,n.jsx)("input",c({id:r,name:r,placeholder:o,className:"border rounded p-4 text-black  ".concat(h?"border-4 border-red-500":""),onChange:a,type:t,maxLength:u},p)),h&&(0,n.jsx)("p",{className:"mt-1 text-red-500 text-sm",children:s})]})};p.propTypes=f,p.defaultProps={type:"text",placeholder:"",errorMessage:"This is a required field",label:"",maxLength:s.ze,onHandleChange:null},r.Z=p},41336:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return G}});var n=t(34051),a=t.n(n),o=t(85893),i=t(67294),s=(t(58316),t(96257),t(11163)),l=t(69795),u=t(85200),c=t(74231),d=t(72143),f=t(40782),p=t(23478),m=t(90594);function h(e,r,t,n,a,o,i){try{var s=e[o](i),l=s.value}catch(u){return void t(u)}s.done?r(l):Promise.resolve(l).then(n,a)}function g(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function i(e){h(o,n,a,i,s,"next",e)}function s(e){h(o,n,a,i,s,"throw",e)}i(void 0)}))}}function b(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function v(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){b(e,r,t[r])}))}return e}var y=function(){var e=(0,i.useState)(!1),r=e[0],t=e[1],n=(0,i.useRef)(null),o=(0,p.Z)().signedTokenContract,s=function(){var e=g(a().mark((function e(r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),n.current=(0,f.Am)("Waiting for transaction approval",{isLoading:!0}),e.next=4,o.createToken(r).then(function(){var e=g(a().mark((function e(r){var t,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,m.Z)(n.current,f.Am.TYPE.DEFAULT,"Processing transaction",!0),e.next=3,r.wait().then((function(e){return(0,m.Z)(n.current,f.Am.TYPE.SUCCESS,"NFT minted successfully!"),e})).catch((function(e){return(0,m.Z)(n.current,f.Am.TYPE.ERROR,e.message),e}));case 3:return t=e.sent,o=t.events[0].args[2].toNumber(),e.abrupt("return",v({},t,{tokenId:o}));case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()).catch((function(e){return(0,m.Z)(n.current,f.Am.TYPE.ERROR,e.message),e}));case 4:return i=e.sent,t(!1),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return{createNftMutation:s,isLoading:r}};function x(e,r,t,n,a,o,i){try{var s=e[o](i),l=s.value}catch(u){return void t(u)}s.done?r(l):Promise.resolve(l).then(n,a)}var w=(0,t(85241).create)("https://ipfs.infura.io:5001/api/v0"),j=function(){var e=(0,i.useState)(!1),r=e[0],t=e[1],n=(0,i.useState)([]),o=n[0],s=n[1],l=function(){var e,r=(e=a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(!0),e.abrupt("return",w.add(r).then((function(e){return t(!1),s(e),e})).catch((function(e){f.Am.error("Failed to upload file to IPFS ".concat(e))})));case 2:case"end":return e.stop()}}),e)})),function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function i(e){x(o,n,a,i,s,"next",e)}function s(e){x(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{ipfsUploadMutation:l,data:o,isLoading:r}},O=t(37579),P=t(45697),N=t.n(P),S=t(96076);function k(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function A(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function R(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){A(e,r,t[r])}))}return e}function I(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);i=!0);}catch(l){s=!0,a=l}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return k(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L={name:N().string.isRequired,label:N().string,placeholder:N().string,errorMessage:N().string,onHandleChange:N().func,maxLength:N().number},E=function(e){var r=e.name,t=e.onHandleChange,n=e.placeholder,a=e.errorMessage,i=e.label,s=e.maxLength,l=I((0,u.U$)(r),2),c=l[0],d=l[1],f=d.touched&&!!d.error;return(0,o.jsxs)("div",{className:"flex flex-col py-2",children:[i&&(0,o.jsx)("label",{className:"font-medium pb-2",htmlFor:r,children:i}),(0,o.jsx)("textarea",R({id:r,name:r,placeholder:n,className:"border rounded  text-black p-4 h-26 ".concat(f?"border-4 border-red-500":""),onChange:t,maxLength:s},c)),f&&(0,o.jsx)("p",{className:"mt-1 text-red-500 text-sm",children:a})]})};E.propTypes=L,E.defaultProps={placeholder:"Example: Asset description",errorMessage:"This is a required field",label:"",maxLength:S.kX,onHandleChange:null};var C=E,T=t(8523),U=t(5506),M=t(21149),Z=t(54539),q={imgPreviewUrl:N().string.isRequired,handleRemoveImage:N().func.isRequired,isLoading:N().bool.isRequired},D=function(e){var r=e.imgPreviewUrl,t=e.handleRemoveImage,n=e.isLoading,a=function(e){n||(e.stopPropagation(),t())};return(0,o.jsxs)("div",{className:"h-full min-w-full sm:w-96 lg:w-96 shadow relative border-2 rounded-lg",children:[n&&(0,o.jsx)("div",{className:"absolute z-20 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2",children:(0,o.jsx)(M.Z,{size:"10"})}),(0,o.jsx)("button",{type:"button",onClick:a,className:(0,Z.Z)(n&&"cursor-not-allowed","z-10 absolute right-2 top-2"),children:(0,o.jsx)(U.Z,{className:"block h-6 w-6","aria-hidden":"true",onClick:a})}),(0,o.jsx)(Image,{unoptimized:!0,src:r,alt:"NFT image",layout:"fill",objectFit:"cover",className:(0,Z.Z)("rounded-lg",n&&"bg-gray-400 opacity-50")})]})};D.propTypes=q;var _=D;function F(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){F(e,r,t[r])}))}return e}var H={onSetUploadedImages:N().func.isRequired,imgPreviewUrl:N().string.isRequired,handleRemoveImage:N().func.isRequired,isDisabled:N().bool,className:N().string,isLoading:N().bool.isRequired},Y=function(e){var r=e.onSetUploadedImages,t=e.imgPreviewUrl,n=e.handleRemoveImage,a=e.isDisabled,s=e.className,l=e.isLoading,u=(0,i.useCallback)((function(e){if(e.length){var t=e.map((function(e){return new File([e],e.name)})).map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})}));r(t)}}),[r]),c=(0,T.uI)({onDrop:u,multiple:!1,accept:"image/jpeg, image/png, image/gif",disabled:a}),d=c.getRootProps,f=c.getInputProps,p=c.isDragActive?(0,o.jsx)("p",{children:"Drop image here..."}):(0,o.jsx)("p",{children:"Drag and drop image here, or click to select"});return(0,o.jsxs)("div",z({},d(),{className:"h-96 sm:w-96 flex justify-center items-center overflow-hidden ".concat(s," ").concat(t?"":"cursor-pointer rounded-lg border-dashed shadow-homogen border-2 border-red-500"),children:[(0,o.jsx)("input",z({},f())),t?(0,o.jsx)(_,{imgPreviewUrl:t,handleRemoveImage:n,isLoading:l}):(0,o.jsx)("div",{className:"px-2",children:p})]}))};Y.defaultProps={isDisabled:!1,className:""},Y.propTypes=H;var $=Y,X=t(19625);function J(e,r,t,n,a,o,i){try{var s=e[o](i),l=s.value}catch(u){return void t(u)}s.done?r(l):Promise.resolve(l).then(n,a)}function V(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function i(e){J(o,n,a,i,s,"next",e)}function s(e){J(o,n,a,i,s,"throw",e)}i(void 0)}))}}var W="https://ipfs.infura.io/ipfs";function G(){var e=(0,i.useState)([]),r=e[0],t=e[1],n=(0,i.useState)(""),f=n[0],p=n[1],m=(0,d.Z)().setIsWalletPanelOpen,h=(0,l.Ge)().active,g=(0,s.useRouter)(),b=y(),v=b.createNftMutation,x=b.isLoading,w=j(),P=w.ipfsUploadMutation,N=w.isLoading;(0,i.useEffect)((function(){var e=function(){var e=V(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(r[0]);case 2:t=e.sent,p("".concat(W,"/").concat(t.path));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r.length&&e()}),[r]);var S=function(){t([]),p("")},k=function(){var e=V(a().mark((function e(r){var t,n,o,i,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.name,n=r.description,h){e.next=3;break}return e.abrupt("return",m(!0));case 3:return o=JSON.stringify({name:t,description:n,walletId:walletId,image:f}),e.next=6,P(o);case 6:return i=e.sent,s="".concat(W,"/").concat(i.path),e.abrupt("return",v(s).then((function(e){return e.status&&g.push("/nft/".concat(e.tokenId))})));case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),A=c.Ry().shape({name:c.Z_().required(),description:c.Z_().required()});return(0,o.jsx)("div",{className:"flex justify-center md:pt-10",children:(0,o.jsx)(u.J9,{initialValues:{name:"",description:""},onSubmit:k,validateOnMount:!0,validationSchema:A,children:function(e){var n,a,i=e.isValid;return(0,o.jsxs)(u.l0,{className:"w-full p-2 md:w-5/6 md:p-10 xl:w-2/3 2xl:w-3/5 text-white border-4 rounded-lg bg-gradient-to-r from-groudient1 to-groudient2 border-rose-600 shadow-homogen",children:[(0,o.jsx)("h1",{className:"py-5 text-2xl font-bold",children:"Create new item"}),(0,o.jsxs)("div",{className:"flex flex-col lg:flex-row pt-5",children:[(0,o.jsx)($,{onSetUploadedImages:t,imgPreviewUrl:(null===(n=r[0])||void 0===n?void 0:n.preview)||"",handleRemoveImage:S,isDisabled:!!(null===(a=r[0])||void 0===a?void 0:a.preview),isLoading:N,className:"lg:mr-4"}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col justify-between pt-2 lg:pt-0",children:[(0,o.jsx)(O.Z,{className:"mt-4 w-full text-black",name:"name",label:"Asset name",placeholder:"Example: The real raw Mooncake",errorMessage:"Asset name is a required field"}),(0,o.jsx)(C,{name:"description",label:"Asset description",placeholder:"Example: A planet-destroying spatial anomaly that was created by the residual energy of an anti-matter bomb",errorMessage:"Asset description is a required field"}),(0,o.jsx)(X.Z,{className:"mt-4 w-full",label:"Create Digital Asset",isDisabled:!i||!f||x,isLoading:N||x,isTypeSubmit:!0,size:"lg"})]})]})]})}})})}},90594:function(e,r,t){"use strict";var n=t(40782);r.Z=function(e,r,t,a){return n.Am.update(e,{render:function(){return t},type:r,autoClose:3e3,isLoading:a})}}},function(e){e.O(0,[26,523,774,888,179],(function(){return r=21932,e(e.s=r);var r}));var r=e.O();_N_E=r}]);